<!DOCTYPE html>
<html>
<head>
    <title>SparkleCord App</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="icon" type="image/png" href="https://sparklecord.github.io/assets/logo.png">
</head>
<body>
    <div id="app-container"></div>
   <script>
    async function loadFromZIP() {
        try {
            const response = await fetch('SparkleCord-1.0.0_Client.zip');
            const blob = await response.blob();
            const zip = await JSZip.loadAsync(blob);
            const files = {};
            
            for (const fileName of Object.keys(zip.files)) {
                if (!zip.files[fileName].dir) {
                    files[fileName] = await zip.files[fileName].async('text');
                }
            }
            
            for (const file in files) {
                if (file.endsWith('.html') || file.endsWith('.js') || file.endsWith('.css')) {
                    files[file] = files[file].replace(/(src|href)="(\.\/|..\/)?([^\/"]+)"/g, (match, attr, _, path) => {
                        return `${attr}="${URL.createObjectURL(new Blob([files[path] || ''], { type: getMimeType(path) }))}"`;
                    });
                }
            }
            
            const appBlob = new Blob([files['index.html']], { type: 'text/html' });
            const appURL = URL.createObjectURL(appBlob);
            document.getElementById('app-container').innerHTML = `<iframe src="${appURL}" style="width:100%;height:100vh;border:none;"></iframe>`;
            document.getElementById('loading').style.display = 'none';
        } catch (error) { console.error('Error loading SparkleCord:', error); }
    }
    function getMimeType(file) {
        if (file.endsWith('.js')) return 'application/javascript';
        if (file.endsWith('.css')) return 'text/css';
        if (file.endsWith('.html')) return 'text/html';
        if (file.match(/\.(png|jpg|jpeg|gif|svg|webp)$/)) return 'image/' + file.split('.').pop();
        return 'application/octet-stream';
    }
    loadFromZIP();
    </script>
    <style> 
    #app-container {
        background: #2B2D31; 
        position: absolute;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
    }
    iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
        background: #2B2D31;
    }
    </style>
</body>
</html>
